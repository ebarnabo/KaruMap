{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock, normalizeClass as _normalizeClass, vShow as _vShow, Transition as _Transition } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  id: \"splashScreen\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-hourglass-start fa-spin m-5 txt-primary\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-hourglass-start fa-spin m-5 txt-primary\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"navbar navbar-expand-lg mb-5 mt-4\"\n};\nconst _hoisted_6 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"navbar-brand\",\n  href: \"#\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  height: \"120\",\n  alt: \"Vue logo\",\n  id: \"logo\",\n  class: \"d-inline-block align-top magic-hover magic-hover__square\"\n})], -1 /* HOISTED */);\nconst _hoisted_8 = {\n  class: \"search ml-auto nav-btn\",\n  id: \"sr-zone\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"search-box\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"fa-search fa-solid search-icon\"\n})], -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"suggestions-container\",\n  ref: \"suggestionsContainer\"\n};\nconst _hoisted_11 = {\n  key: 0\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  id: \"search-submit\",\n  class: \"magic-hover magic-hover__square\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-caret-left\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  class: \"container\"\n};\nconst _hoisted_17 = {\n  id: \"appli\",\n  class: \"\"\n};\nconst _hoisted_18 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_19 = [\"value\"];\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Filtres\", -1 /* HOISTED */);\nconst _hoisted_21 = {\n  class: \"filter-option\"\n};\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"filter-text\"\n}, \"Jardins\", -1 /* HOISTED */);\nconst _hoisted_23 = {\n  class: \"toggle-switch\"\n};\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"slider round\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_25 = {\n  class: \"filter-option\"\n};\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"filter-text\"\n}, \"Sites et Monuments\", -1 /* HOISTED */);\nconst _hoisted_27 = {\n  class: \"toggle-switch\"\n};\nconst _hoisted_28 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"slider round\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_29 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-undo\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_30 = [_hoisted_29];\nconst _hoisted_31 = {\n  class: \"popup_titre\"\n};\nconst _hoisted_32 = {\n  class: \"popup-txt\"\n};\nconst _hoisted_33 = /*#__PURE__*/_createElementVNode(\"b\", null, \"Code postal : \", -1 /* HOISTED */);\nconst _hoisted_34 = {\n  class: \"mb-3\"\n};\nconst _hoisted_35 = {\n  class: \"popup-txt\"\n};\nconst _hoisted_36 = /*#__PURE__*/_createElementVNode(\"b\", null, \"Commune : \", -1 /* HOISTED */);\nconst _hoisted_37 = [\"onClick\"];\nconst _hoisted_38 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-pen-to-square\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_39 = [\"onClick\"];\nconst _hoisted_40 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-delete-left\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_41 = {\n  class: \"menu col-lg-2 col-xl-2 col-xxl-1\",\n  ref: \"menu\"\n};\nconst _hoisted_42 = {\n  key: 0\n};\nconst _hoisted_43 = [\"onClick\"];\nconst _hoisted_44 = {\n  class: \"card-body\"\n};\nconst _hoisted_45 = [\"src\"];\nconst _hoisted_46 = {\n  class: \"card-title\"\n};\nconst _hoisted_47 = {\n  class: \"card-text\"\n};\nconst _hoisted_48 = {\n  class: \"card-text\"\n};\nconst _hoisted_49 = [\"onClick\"];\nconst _hoisted_50 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-turn-up\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_51 = {\n  class: \"container-fluid text-center\"\n};\nconst _hoisted_52 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_53 = {\n  class: \"col-3\"\n};\nconst _hoisted_54 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-arrows-spin\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_55 = {\n  class: \"row justify-content-center\"\n};\nconst _hoisted_56 = {\n  class: \"col\"\n};\nconst _hoisted_57 = {\n  key: 0,\n  class: \"fas fa-moon\",\n  id: \"theme-icon\"\n};\nconst _hoisted_58 = {\n  key: 1,\n  class: \"fas fa-sun\",\n  id: \"theme-icon\"\n};\nconst _hoisted_59 = {\n  key: 0,\n  class: \"stats\"\n};\nconst _hoisted_60 = {\n  class: \"stat-item magic-hover magic-hover__square\"\n};\nconst _hoisted_61 = {\n  class: \"txt-secondary\"\n};\nconst _hoisted_62 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Jardins\", -1 /* HOISTED */);\nconst _hoisted_63 = {\n  class: \"stat-item\"\n};\nconst _hoisted_64 = {\n  class: \"txt-primary\"\n};\nconst _hoisted_65 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Monuments\", -1 /* HOISTED */);\nconst _hoisted_66 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"additional-text\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, \"Données statistiques\")], -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_l_tile_layer = _resolveComponent(\"l-tile-layer\");\n  const _component_l_popup = _resolveComponent(\"l-popup\");\n  const _component_l_marker = _resolveComponent(\"l-marker\");\n  const _component_l_map = _resolveComponent(\"l-map\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showSplash ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createTextVNode(\" Chargement... \"), _hoisted_4])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Navbar \"), _createElementVNode(\"nav\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" Logo \"), _hoisted_7, _createCommentVNode(\" Zone de recherche \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"form\", {\n    class: \"search-container\",\n    autocomplete: \"off\",\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.rechercherMarqueur && $options.rechercherMarqueur(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"search-box\",\n    type: \"text\",\n    class: \"search-box magic-hover magic-hover__square\",\n    name: \"q\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchTerm = $event),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.mettreAJourSuggestions && $options.mettreAJourSuggestions(...args)),\n    onBlur: _cache[2] || (_cache[2] = (...args) => _ctx.fermerSuggestions && _ctx.fermerSuggestions(...args)),\n    ref: \"searchBox\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.searchTerm]]), _hoisted_9, _createElementVNode(\"div\", _hoisted_10, [$data.suggestions.length ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.suggestions, suggestion => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: suggestion,\n      onClick: $event => $options.selectionnerSuggestion(suggestion)\n    }, _toDisplayString(suggestion), 9 /* TEXT, PROPS */, _hoisted_12);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)], 512 /* NEED_PATCH */), _hoisted_13], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"button\", {\n    class: \"btn nav-btn magic-hover cursorOuter\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.toggleMenu && $options.toggleMenu(...args)),\n    ref: \"menuButton\",\n    id: \"btn_list\"\n  }, [..._hoisted_15], 512 /* NEED_PATCH */)])]), _createCommentVNode(\" Contenu de l'application \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"l-map-container width-transition\", {\n      'col-xxl-11-animated': $data.isMenuOpen,\n      'col-xxl-12-animated': !$data.isMenuOpen,\n      'col-lg-10-animated': $data.isMenuOpen,\n      'col-lg-12-animated': !$data.isMenuOpen\n    }])\n  }, [_createCommentVNode(\" Taille de la carte \"), _createVNode(_component_l_map, {\n    zoom: $data.zoom,\n    center: $data.center,\n    onClick: $options.Ajouter_Marqueur,\n    class: \"l-map no-cursor\",\n    zoomControl: \"true\"\n  }, {\n    default: _withCtx(() => [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.currentStyle = $event),\n      id: \"mapselector\",\n      onClick: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"stop\"]))\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.styles, style => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        value: style.value,\n        key: style.value\n      }, _toDisplayString(style.name), 9 /* TEXT, PROPS */, _hoisted_19);\n    }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.currentStyle]]), _createElementVNode(\"div\", {\n      class: \"filters\",\n      onClick: _cache[9] || (_cache[9] = _withModifiers(() => {}, [\"stop\"]))\n    }, [_hoisted_20, _createElementVNode(\"div\", _hoisted_21, [_hoisted_22, _createElementVNode(\"label\", _hoisted_23, [_withDirectives(_createElementVNode(\"input\", {\n      id: \"jardin\",\n      type: \"checkbox\",\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.filters.jardins = $event)\n    }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.filters.jardins]]), _hoisted_24])]), _createElementVNode(\"div\", _hoisted_25, [_hoisted_26, _createElementVNode(\"label\", _hoisted_27, [_withDirectives(_createElementVNode(\"input\", {\n      id: \"monument\",\n      type: \"checkbox\",\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.filters.sitesEtMonuments = $event)\n    }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.filters.sitesEtMonuments]]), _hoisted_28])])]), _createCommentVNode(\" Boutton de reset \"), _createElementVNode(\"button\", {\n      class: \"magic-hover magic-hover__square btn btn-reset\",\n      onClick: [_cache[10] || (_cache[10] = (...args) => $options.resetMap && $options.resetMap(...args)), _cache[11] || (_cache[11] = _withModifiers(() => {}, [\"stop\"]))]\n    }, [..._hoisted_30]), _createVNode(_component_l_tile_layer, {\n      url: $options.tileLayerUrl\n    }, null, 8 /* PROPS */, [\"url\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredMarqueurs, (marker, index) => {\n      return _openBlock(), _createBlock(_component_l_marker, {\n        key: index,\n        \"lat-lng\": marker.coordinates,\n        icon: $options.getIcon(marker.type),\n        onClick: $event => $options.centerOnMarker(marker.coordinates[0], marker.coordinates[1], index)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_l_popup, null, {\n          default: _withCtx(() => [_createElementVNode(\"h1\", _hoisted_31, _toDisplayString(marker.name), 1 /* TEXT */), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_32, [_hoisted_33, _createTextVNode(\" \" + _toDisplayString(marker.code_postal), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"p\", _hoisted_35, [_hoisted_36, _createTextVNode(_toDisplayString(marker.commune), 1 /* TEXT */)])]), _createElementVNode(\"button\", {\n            class: \"btn-primary btn mx-2 mt-2\",\n            onClick: $event => $options.Modif_Marqueur(index)\n          }, [_createTextVNode(\"Modifier \"), _hoisted_38], 8 /* PROPS */, _hoisted_37), _createElementVNode(\"button\", {\n            class: \"btn-danger btn mx-2 mt-2\",\n            onClick: $event => $options.Supprimer_Marqueur(index)\n          }, [_createTextVNode(\"Supprimer \"), _hoisted_40], 8 /* PROPS */, _hoisted_39), _createCommentVNode(\" BOUTON ouvris le gps \")]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"lat-lng\", \"icon\", \"onClick\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"zoom\", \"center\", \"onClick\"])], 2 /* CLASS */), _createCommentVNode(\" Menu caché \"), _createVNode(_Transition, {\n    name: \"menu\",\n    persisted: \"\"\n  }, {\n    default: _withCtx(() => [_withDirectives(_createElementVNode(\"div\", _hoisted_41, [$data.Marqueurs.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_42, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.Marqueurs, (marqueur, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: \"card\",\n        onClick: $event => $options.centerOnMarker(marqueur.coordinates[0], marqueur.coordinates[1])\n      }, [_createElementVNode(\"div\", _hoisted_44, [_createElementVNode(\"img\", {\n        src: $options.getBadgeUrl(marqueur.type),\n        class: \"badge-icon\",\n        alt: \"Type\"\n      }, null, 8 /* PROPS */, _hoisted_45), _createElementVNode(\"h5\", _hoisted_46, _toDisplayString(marqueur.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_47, \"Code postal: \" + _toDisplayString(marqueur.code_postal), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_48, \"Commune: \" + _toDisplayString(marqueur.commune), 1 /* TEXT */), _createElementVNode(\"button\", {\n        class: \"btn btn-primary magic-hover\",\n        onClick: _withModifiers($event => $options.ouvrirApplicationGPS(marqueur), [\"stop\", \"prevent\"])\n      }, [_createTextVNode(\"Itinéraires \"), _hoisted_50], 8 /* PROPS */, _hoisted_49)])], 8 /* PROPS */, _hoisted_43);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)], 512 /* NEED_PATCH */), [[_vShow, $data.isMenuOpen]])]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_51, [_createElementVNode(\"div\", _hoisted_52, [_createElementVNode(\"div\", _hoisted_53, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary mt-3 mb-2 magic-hover magic-hover__square\",\n    onClick: _cache[12] || (_cache[12] = (...args) => $options.Import_donnes && $options.Import_donnes(...args)),\n    onMouseover: _cache[13] || (_cache[13] = (...args) => $options.addSpin && $options.addSpin(...args)),\n    onMouseleave: _cache[14] || (_cache[14] = (...args) => $options.removeSpin && $options.removeSpin(...args))\n  }, [_createTextVNode(\"Maj des données depuis l'API \"), _hoisted_54], 32 /* NEED_HYDRATION */)])]), _createElementVNode(\"div\", _hoisted_55, [_createElementVNode(\"div\", _hoisted_56, [_createElementVNode(\"button\", {\n    id: \"theme-toggle\",\n    class: \"theme-toggle-button magic-hover magic-hover__square\",\n    onClick: _cache[15] || (_cache[15] = (...args) => $options.toggleTheme && $options.toggleTheme(...args))\n  }, [$data.isDarkMode ? (_openBlock(), _createElementBlock(\"i\", _hoisted_57)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_58))])])])]), _ctx.marqueurs && _ctx.marqueurs.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_59, [_createElementVNode(\"div\", _hoisted_60, [_createElementVNode(\"h5\", _hoisted_61, _toDisplayString($data.nombreJardins), 1 /* TEXT */), _hoisted_62]), _createElementVNode(\"div\", _hoisted_63, [_createElementVNode(\"h5\", _hoisted_64, _toDisplayString($data.nombreMonuments), 1 /* TEXT */), _hoisted_65]), _hoisted_66])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["_imports_0","id","_createElementVNode","class","href","src","height","alt","for","ref","type","_hoisted_14","_hoisted_29","_createElementBlock","_hoisted_1","$data","showSplash","_hoisted_2","_hoisted_3","_hoisted_4","_createCommentVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","autocomplete","onSubmit","_cache","_withModifiers","args","$options","rechercherMarqueur","name","searchTerm","$event","onInput","mettreAJourSuggestions","onBlur","_ctx","fermerSuggestions","_hoisted_9","_hoisted_10","suggestions","length","_hoisted_11","_Fragment","_renderList","suggestion","key","onClick","selectionnerSuggestion","_hoisted_12","_hoisted_13","toggleMenu","_hoisted_16","_hoisted_17","_hoisted_18","_normalizeClass","isMenuOpen","_createVNode","_component_l_map","zoom","center","Ajouter_Marqueur","zoomControl","currentStyle","styles","style","value","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","filters","jardins","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","sitesEtMonuments","_hoisted_28","resetMap","_component_l_tile_layer","url","tileLayerUrl","filteredMarqueurs","marker","index","_createBlock","_component_l_marker","coordinates","icon","getIcon","centerOnMarker","_component_l_popup","_hoisted_31","_toDisplayString","_hoisted_32","_hoisted_33","code_postal","_hoisted_34","_hoisted_35","_hoisted_36","commune","Modif_Marqueur","_hoisted_38","Supprimer_Marqueur","_hoisted_40","_Transition","persisted","_hoisted_41","Marqueurs","_hoisted_42","marqueur","_hoisted_44","getBadgeUrl","_hoisted_46","_hoisted_47","_hoisted_48","ouvrirApplicationGPS","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","Import_donnes","onMouseover","addSpin","onMouseleave","removeSpin","_hoisted_54","_hoisted_55","_hoisted_56","toggleTheme","isDarkMode","_hoisted_57","_hoisted_58","marqueurs","_hoisted_59","_hoisted_60","_hoisted_61","nombreJardins","_hoisted_62","_hoisted_63","_hoisted_64","nombreMonuments","_hoisted_65","_hoisted_66"],"sources":["/Users/edwinbarnabot/Downloads/MapWebService/map/src/components/ContentMap.vue"],"sourcesContent":["<template>\n  \n  <div id=\"app\">\n    <div v-if=\"showSplash\" id=\"splashScreen\"><i class=\"fa-solid fa-hourglass-start fa-spin m-5 txt-primary\"></i> Chargement... <i class=\"fa-solid fa-hourglass-start fa-spin m-5 txt-primary\"></i></div>\n\n    <!-- Navbar -->\n    <nav class=\"navbar navbar-expand-lg mb-5 mt-4\">\n      <div class=\"container-fluid\">\n        <!-- Logo -->\n        <a class=\"navbar-brand\" href=\"#\">\n          <img src=\"../assets/logo.png\" height=\"120\" alt=\"Vue logo\" id=\"logo\" class=\"d-inline-block align-top magic-hover magic-hover__square\">\n        </a>\n        \n        <!-- Zone de recherche -->\n        <div class=\"search ml-auto nav-btn\" id=\"sr-zone\" >\n          <form class=\"search-container\" autocomplete=\"off\" @submit.prevent=\"rechercherMarqueur\">\n            <input id=\"search-box\" type=\"text\" class=\"search-box magic-hover magic-hover__square\" name=\"q\" v-model=\"searchTerm\" @input=\"mettreAJourSuggestions\" @blur=\"fermerSuggestions\" ref=\"searchBox\" />\n            <label for=\"search-box\"><span class=\"fa-search fa-solid search-icon\"></span></label>\n            <div class=\"suggestions-container\" ref=\"suggestionsContainer\">\n              <ul v-if=\"suggestions.length\">\n                <li v-for=\"suggestion in suggestions\" :key=\"suggestion\" @click=\"selectionnerSuggestion(suggestion)\">\n                  {{ suggestion }}\n                </li>\n              </ul>\n            </div>\n\n            <input type=\"submit\" id=\"search-submit\" class=\"magic-hover magic-hover__square\"/>\n          </form>\n        </div>\n        <button class=\"btn nav-btn magic-hover cursorOuter\" @click=\"toggleMenu\" ref=\"menuButton\" id=\"btn_list\"><i class=\"fa-solid fa-caret-left\"></i></button>\n      </div>\n    </nav>\n\n    <!-- Contenu de l'application -->\n    <div class=\"container\">\n      <div id=\"appli\" class=\"\">\n      <div  class=\"container-fluid \">\n        <div class=\"l-map-container width-transition\" :class=\"{\n            'col-xxl-11-animated': isMenuOpen, \n            'col-xxl-12-animated': !isMenuOpen,\n            'col-lg-10-animated': isMenuOpen, \n            'col-lg-12-animated': !isMenuOpen,\n          }\">          \n          <!-- Taille de la carte -->\n          <l-map :zoom=\"zoom\" :center=\"center\" @click=\"Ajouter_Marqueur\" class=\"l-map no-cursor\" zoomControl=\"true\">\n            <select v-model=\"currentStyle\"  id=\"mapselector\" @click.stop>\n              <option v-for=\"style in styles\" :value=\"style.value\" :key=\"style.value\">\n                {{ style.name }}\n              </option>\n            </select>\n            <div class=\"filters\" @click.stop>\n              <h1>Filtres</h1>\n              <div class=\"filter-option\">\n                <div  class=\"filter-text\">Jardins</div>\n                <label class=\"toggle-switch\">\n                  <input id=\"jardin\" type=\"checkbox\" v-model=\"filters.jardins\">\n                  <span class=\"slider round\"></span>\n                </label>\n              </div>\n              <div class=\"filter-option\">\n                <div class=\"filter-text\">Sites et Monuments</div>\n                <label class=\"toggle-switch\">\n                  <input id=\"monument\" type=\"checkbox\" v-model=\"filters.sitesEtMonuments\">\n                  <span class=\"slider round\"></span>\n                </label>\n              </div>\n            </div>\n        <!-- Boutton de reset -->\n        <button class=\"magic-hover magic-hover__square btn btn-reset\" @click=\"resetMap\" @click.stop>\n          <i class=\"fas fa-undo\"></i>\n        </button>\n            <l-tile-layer :url=\"tileLayerUrl\"></l-tile-layer>\n            <l-marker  v-for=\"(marker, index) in filteredMarqueurs\" :key=\"index\" :lat-lng=\"marker.coordinates\" :icon=\"getIcon(marker.type)\" @click=\"centerOnMarker(marker.coordinates[0], marker.coordinates[1], index)\">          \n              <l-popup>\n                <h1 class=\"popup_titre\">{{ marker.name }}</h1>\n                <div><p class=\"popup-txt\"><b>Code postal : </b> {{ marker.code_postal }}</p></div>\n                <div class=\"mb-3\"> <p class=\"popup-txt\"><b>Commune : </b>{{ marker.commune }}</p></div>\n                <button class=\"btn-primary btn mx-2 mt-2 \" @click=\"Modif_Marqueur(index)\">Modifier <i class=\"fa-solid fa-pen-to-square\"></i></button>\n                <button class=\"btn-danger btn mx-2 mt-2\" @click=\"Supprimer_Marqueur(index)\">Supprimer <i class=\"fa-solid fa-delete-left\"></i></button>\n                <!-- BOUTON ouvris le gps -->\n              </l-popup>\n            </l-marker>\n          </l-map>\n        </div>\n        \n          <!-- Menu caché -->\n          <transition name=\"menu\">\n            <div class=\"menu col-lg-2 col-xl-2 col-xxl-1\" v-show=\"isMenuOpen\" ref=\"menu\">\n              <div v-if=\"Marqueurs.length > 0\">\n                <div v-for=\"(marqueur, index) in Marqueurs\" :key=\"index\" class=\"card\" @click=\"centerOnMarker(marqueur.coordinates[0], marqueur.coordinates[1])\">\n                  <div class=\"card-body\">\n                    <img :src=\"getBadgeUrl(marqueur.type)\" class=\"badge-icon\" alt=\"Type\">\n                    <h5 class=\"card-title\">{{ marqueur.name }}</h5>\n                    <p class=\"card-text\">Code postal: {{ marqueur.code_postal }}</p>\n                    <p class=\"card-text\">Commune: {{ marqueur.commune }}</p>\n                    <button class=\"btn btn-primary magic-hover\" @click.stop.prevent=\"ouvrirApplicationGPS(marqueur)\">Itinéraires <i class=\"fa-solid fa-turn-up\"></i></button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </transition>\n      </div>\n      <div class=\"container-fluid text-center\">\n        <div class=\"row justify-content-center\">\n          <div class=\"col-3 \">\n            <button class=\"btn btn-primary mt-3 mb-2 magic-hover magic-hover__square\" @click=\"Import_donnes\" @mouseover=\"addSpin\" @mouseleave=\"removeSpin\">Maj des données depuis l'API <i class=\"fas fa-arrows-spin\"></i> </button>\n          </div>\n        </div>\n\n      <div class=\"row justify-content-center\">\n        <div class=\"col\">\n          <button id=\"theme-toggle\" class=\"theme-toggle-button  magic-hover magic-hover__square\" @click=\"toggleTheme\">\n            <i v-if=\"isDarkMode\" class=\"fas fa-moon\" id=\"theme-icon\"></i>\n            <i v-else class=\"fas fa-sun\" id=\"theme-icon\"></i> \n          </button>\n        </div>\n\n      </div>  \n      </div>\n      <div class=\"stats\" v-if=\"marqueurs && marqueurs.length > 0\">\n      <div class=\"stat-item  magic-hover magic-hover__square\">\n        <h5 class=\"txt-secondary\">{{ nombreJardins }}</h5>\n        <p>Jardins</p>\n      </div>\n      <div class=\"stat-item\">\n        <h5 class=\"txt-primary\">{{ nombreMonuments }}</h5>\n        <p>Monuments</p>\n      </div>\n      <div class=\"additional-text\">\n        <p>Données statistiques</p>\n      </div>\n    </div>\n\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { LMap, LTileLayer, LMarker, LPopup } from '@vue-leaflet/vue-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport axios from 'axios';\nimport Swal from 'sweetalert2/dist/sweetalert2';\nimport 'sweetalert2/dist/sweetalert2.css';\nimport L from 'leaflet';\n\nimport jardinBadge from '../assets/img/jardin-badge.png';\nimport monumentBadge from '../assets/img/monument-badge.png';\nimport { magicMouse } from 'magicmouse.js'\n\nconst hauteurIcone = 70;\nconst ratio = 170 / 261;\nconst largeurIcone = hauteurIcone * ratio;\n\nconst jardinIcon = L.icon({\n  iconUrl: require('../assets/img/jardin.png'), \n  iconSize: [largeurIcone, hauteurIcone], \n});\n\nconst monumentIcon = L.icon({\n  iconUrl: require('../assets/img/muse.png'), \n  iconSize: [largeurIcone, hauteurIcone],\n});\n\nexport default {\n  name: 'KaruData',\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup\n  },\n  mounted() {\n    setTimeout(() => {\n      this.showSplash = false; \n    }, 650); // Temps reload \n    // Charge les données de l'API et de la BD au lancement de l'appli\n    this.Import_data();\n    console.log(this.marqueurs); \n    this.fetchMarqueurs();\n    //this.Import_donnes();\n    this.applySystemTheme();\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => this.applySystemTheme());\n    document.addEventListener('click', this.handleOutsideClick);\n    document.addEventListener('click', this.gererClicDocument);\n    this.initMagicMouse();\n},\n  data() {\n    return {\n      center: [16.265, -61.550], // Coordonnées de la Guadeloupe\n      zoom: 10.4,\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      isMenuOpen: false, \n      isCursorHidden: true,\n      showSplash: true, // Afficher l'écran de splash\n      Marqueurs: [],\n      nombreJardins: 0,\n      nombreMonuments: 0,\n      suggestions: [],\n      ouvertSuggestions: false,\n      searchTerm: '',\n      Marqueur_Select: null,\n      Marqueur_Nom: '',\n      AjoutMarquer: false,\n      selectedMarkerIndex: null, \n      dernierMarqueur: null,\n      isDarkMode: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches,\n      filters: {\n      jardins: true,\n      sitesEtMonuments: true,\n      },\n      currentStyle: 'jawg-streets', // Carte active\n      styles: [\n        { name: 'Streets', value: 'jawg-streets' },\n        { name: 'Terrain', value: 'jawg-terrain' },\n        { name: 'Light', value: 'jawg-light' },\n        { name: 'Dark', value: 'jawg-dark' },\n        { name: 'Matrix', value: 'jawg-matrix' },\n        { name: 'Sunny', value: 'jawg-sunny' }\n      ],\n      showSearch: false,\n    };\n  },\n  computed: {\n    tileLayerUrl() {\n      return `https://{s}.tile.jawg.io/${this.currentStyle}/{z}/{x}/{y}{r}.png?access-token=si8sl9pjFXL4H8PHv5ZjtXebofnvIybSsVqk3WxdmC8dyCI3UXZOe9hQQ8kbWKGE`;\n    },\n    filteredMarqueurs() {\n    return this.Marqueurs.filter(marqueur => {\n      if (this.filters.jardins && marqueur.type === 'jardins') return true;\n      if (this.filters.sitesEtMonuments && marqueur.type === 'SitesEtMonuments') return true;\n      return false;\n    });\n  },\n  },\n  beforeUnmount() {\n  window.matchMedia('(prefers-color-scheme: dark)').removeEventListener('change', this.applySystemTheme);\n  document.removeEventListener('click', this.handleOutsideClick);\n  document.removeEventListener('click', this.gererClicDocument);\n},\n\n  methods: {\n    toggleMenu() {\n    this.isMenuOpen = !this.isMenuOpen;\n    console.log(`Menu basculé : ${this.isMenuOpen ? 'Ouvert' : 'Fermé'}`);\n  },\n    handleOutsideClick(e) {\n      if (this.$refs.menu && !this.$refs.menu.contains(e.target) && !this.$refs.menuButton.contains(e.target)) {\n      console.log(\"Click dehors, fermeture menu.\");\n      this.isMenuOpen = false;\n    }\n    },\n    toggleSearch() {\n      this.showSearch = !this.showSearch;\n    },\n  // Ouvrir les positions dans une appli gps\n    ouvrirApplicationGPS(marqueur) {\n    Swal.fire({\n      title: 'Ouvrir avec',\n      html: `\n        <div style=\"text-align: center;\">\n          <p>Choisissez votre application pour aller à la position :</p>\n          <button id=\"openGoogleMaps\" class=\"swal2-confirm swal2-styled btn\" style=\"display: inline-block; margin: 0.5em;\">\n          </button>\n          <button id=\"openWaze\" class=\"swal2-confirm swal2-styled btn\" style=\"display: inline-block; margin: 0.5em;\">\n          </button>\n        </div>\n      `,\n      showCancelButton: true,\n      cancelButtonText: 'Annuler',\n      cancelButtonColor: '#cc1c35',\n      showConfirmButton: false, \n      preConfirm: () => {}, \n      didOpen: () => {\n        // ouvrir Google Maps\n        document.getElementById('openGoogleMaps').addEventListener('click', () => {\n          const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${marqueur.coordinates[0]},${marqueur.coordinates[1]}`;\n          window.open(googleMapsUrl, '_blank');\n          Swal.close();\n        });\n        // ouvrir Waze\n        document.getElementById('openWaze').addEventListener('click', () => {\n          const wazeUrl = `https://waze.com/ul?ll=${marqueur.coordinates[0]}%2C${marqueur.coordinates[1]}&navigate=yes`;\n          window.open(wazeUrl, '_blank');\n          Swal.close();\n        });\n      }\n    });\n    },\n    toggleTheme() {\n    this.isDarkMode = !this.isDarkMode; // Bascule sur le thème sombre\n    document.body.classList.toggle('dark-mode');\n    this.currentStyle = this.isDarkMode ? 'jawg-streets' : 'jawg-dark';\n    },\n    applySystemTheme() {\n      const isSystemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.isDarkMode = isSystemDark;\n      this.toggleTheme(); // Appliquer le thème\n    },\n    initMagicMouse() {\n      const options = {\n      \"outerStyle\": \"circle\",\n      \"hoverEffect\": \"circle-move\",\n      \"hoverItemMove\": false,\n      \"defaultCursor\": false,\n      \"outerWidth\": 30,\n      \"outerHeight\": 30\n    }\n    magicMouse(options);\n    },\n    rechercherMarqueur() {\n    const searchTerm = document.getElementById('search-box').value.toLowerCase();\n    const foundMarker = this.Marqueurs.find(marker => marker.name.toLowerCase().includes(searchTerm));\n    \n    if (foundMarker) {\n      this.centerOnMarker(foundMarker.coordinates[0], foundMarker.coordinates[1]);\n    } else {\n      alert('Marqueur non trouvé.');\n    }\n    },\n    mettreAJourSuggestions() {\n    const searchTerm = this.searchTerm.toLowerCase();\n    this.suggestions = this.Marqueurs.filter(marker => marker.name.toLowerCase().includes(searchTerm))\n      .map(marker => marker.name)\n      .slice(0, 3); // Limite à 3 suggestions\n    \n    this.ouvertSuggestions = this.suggestions.length > 0;\n    },\n    selectionnerSuggestion(suggestion) {\n      this.searchTerm = suggestion; // Maj du champ de recherche avec la suggestion sélectionnée\n      this.suggestions = []; \n      this.ouvertSuggestions = false;\n      const foundMarker = this.Marqueurs.find(marker => marker.name === suggestion);\n      if (foundMarker) {\n        this.centerOnMarker(foundMarker.coordinates[0], foundMarker.coordinates[1]);\n      }\n    },\n    gererClicDocument(e) {\n      if (this.ouvertSuggestions && !this.$refs.searchBox.contains(e.target) && !this.$refs.suggestionsContainer.contains(e.target)) {\n        this.suggestions = [];\n        this.ouvertSuggestions = false;\n      }\n    },\n    addSpin(event) {\n      if (event.target.classList.contains('btn')) {\n        event.target.querySelectorAll('i').forEach((icon) => {\n          icon.classList.add('fa-spin');\n        });\n      }\n    },\n    removeSpin(event) {\n    if (event.target.classList.contains('btn')) {\n      event.target.querySelectorAll('i').forEach((icon) => {\n        icon.classList.remove('fa-spin');\n      });\n    }\n    },\n    async Import_donnes() {\n  try {\n    console.log('Début de l\\'importation des données...');\n    await Promise.all([\n      axios.get('http://localhost:3000/jardins'),\n      axios.get('http://localhost:3000/monuments')\n    ]);\n    console.log('Import des données OK');\n    \n    const marqueurs_données = await axios.get('http://localhost:3000/marqueurs');\n    console.log('Récupération des données des marqueurs OK', marqueurs_données.data);\n\n    this.Marqueurs = marqueurs_données.data.map((marqueur) => {\n      let type = marqueur.type;\n      return {\n        coordinates: [marqueur.latitude, marqueur.longitude],\n        name: marqueur.nom,\n        type: type,\n        code_postal: marqueur.code_postal || marqueur.cp,\n        commune: marqueur.commune,\n        adresse_complete: marqueur.adresse_complete,\n      };\n    });\n    this.reloadWithSplash();\n    console.log('Transformation des données des marqueurs OK', this.Marqueurs);\n  } catch (error) {\n    console.error(\"Erreur lors de l'importation des données:\", error);\n  }\n  \n    },\n    async Import_data() {\n          try {\n        console.log('Début de l\\'importation des données des marqueurs...');\n        const marqueurs_données = await axios.get('http://localhost:3000/marqueurs');\n        console.log('Récupération des données des marqueurs OK', marqueurs_données.data);\n\n        this.Marqueurs = marqueurs_données.data.map((marqueur) => {\n          return {\n            coordinates: [marqueur.latitude, marqueur.longitude],\n            name: marqueur.nom,\n            type: marqueur.type,\n            code_postal: marqueur.code_postal || marqueur.cp, // Utilisez 'marqueur.cp' si 'marqueur.code_postal' n'est pas disponible\n            commune: marqueur.commune,\n            adresse_complete: marqueur.adresse_complete,\n          };\n        });\n\n        console.log('Transformation et importation des données des marqueurs OK');\n      } catch (error) {\n        console.error(\"Erreur lors de l'importation des données des marqueurs:\", error);\n      }\n    },    \n    Modif_Marqueur(index) {\n    const currentMarker = this.Marqueurs[index];\n    const originalName = currentMarker.name;\n\n    Swal.fire({\n      html: `\n        <h2 class=\"txt-primary\">Modifier un marqueur</h2>\n        <input id=\"nom\" class=\"swal2-input\" value=\"${currentMarker.name}\" placeholder=\"Nom\">\n        <input id=\"code_postal\" class=\"swal2-input\" value=\"${currentMarker.code_postal}\" placeholder=\"Code Postal\">\n        <input id=\"commune\" class=\"swal2-input\" value=\"${currentMarker.commune}\" placeholder=\"Commune\">\n      <div class=\"mt-3\">\n            <h5 class=\"txt-primary\">Choix du type</h5>\n            <label>\n              <input type=\"radio\" name=\"type\" value=\"jardins\" ${currentMarker.type === 'jardins' ? 'checked' : ''}>\n              <img src=\"${jardinBadge}\" alt=\"Jardin\" style=\"width: 50px;\">\n            </label>\n            <label>\n              <input type=\"radio\" name=\"type\" value=\"SitesEtMonuments\" ${currentMarker.type === 'SitesEtMonuments' ? 'checked' : ''}>\n              <img src=\"${monumentBadge}\" alt=\"Monument\" style=\"width: 50px;\">\n            </label>\n      </div>\n      `\n      ,\n      preConfirm: () => {\n        return {\n          name : document.getElementById('nom').value,\n          code_postal: document.getElementById('code_postal').value,\n          commune: document.getElementById('commune').value,\n          type: document.querySelector('input[name=\"type\"]:checked').value,\n        };\n      },\n      confirmButtonText: 'Valider les modifications',\n      focusConfirm: false,\n    }).then((result) => {\n      // Après avoir cliquer sur le bouton de modal\n      if (result.isConfirmed) {\n        // Mise à jour du marqueur dans l'interface utilisateur\n        const updatedMarker = {\n          ...currentMarker,\n          name: result.value.name,\n          code_postal: result.value.code_postal,\n          commune: result.value.commune,\n          type: result.value.type,\n        };\n\n        this.Marqueurs[index] = updatedMarker; \n        this.Marqueur_Select = updatedMarker; \n        this.Marqueur_Update(originalName);\n      }\n    });\n    },\n    Marqueur_Update(originalName) {\n      const { name, code_postal, commune, type } = this.Marqueur_Select;\n      axios.put(`http://localhost:3000/marqueurs/${originalName}`, {\n        new_nom: name,\n        new_code_postal: code_postal ,\n        new_commune: commune,\n        type: type,\n      })\n      .then(() => {\n        console.log('Mise à jour Marqueur OK');\n        this.Marqueur_Select = null; // Réinitialiser après la mise à jour\n      })\n      .catch(error => {\n        console.error('Mise à jour Marqueur KO :', error);\n      });\n    },\n    Annuler() {\n      if (this.AjoutMarquer && this.dernierMarqueur !== null) {\n        this.Marqueurs.splice(this.dernierMarqueur, 1);\n        this.dernierMarqueur = null;\n      }\n      this.Marqueur_Select = null;\n      this.AjoutMarquer = false; \n    },\n    Supprimer_Marqueur(index) {\n      const currentMarker = this.Marqueurs[index];\n      Swal.fire({\n        title: 'Êtes-vous sûr de vouloir supprimer ce marqueur ?',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#5457f6',\n        cancelButtonColor: '#cc1c35',\n        confirmButtonText: 'Oui, supprimer !'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.Marqueurs.splice(index, 1);\n          axios.delete(`http://localhost:3000/marqueurs/${currentMarker.name}`)\n            .then(() => {\n              console.log('Suppression Marqueur OK');\n              this.calculateStats();\n              //this.resetMap();\n              location.reload();\n            })\n            .catch(error => {\n              console.error('Suppression Marqueur KO :', error);\n            });\n        }\n      });\n    },\n    Ajouter_Marqueur(event) {\n  console.log(\"Début de la fonction Ajouter_Marqueur\");\n  const latitude = event.latlng.lat;\n  const longitude = event.latlng.lng;\n  console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);\n\n  // Appel de l'API pour obtenir la liste des communes \n  axios.get('https://geo.api.gouv.fr/communes')\n    .then(response => {\n      const communes = response.data.map(commune => ({\n        nom: commune.nom,\n        code_postal: commune.codesPostaux[0] \n      }));\n      console.log(`Nombre de communes récupérées : ${communes.length}`);\n\n      // La liste des options pour l'autocomplétion\n      const options = communes.map(commune => `${commune.nom} (${commune.code_postal})`);\n      console.log(`Options pour l'autocomplétion construites : ${options.length} options`);\n\n      // Affichage du formulaire Swal\n      Swal.fire({\n        html: `\n          <h1 class=\"txt-primary\">Ajouter un centre d'intérêt <i class=\"fa-solid txt-dark fa-map-pin txt-danger\"></i></h1>\n          <input id=\"nom\" class=\"swal2-input\" placeholder=\"Nom\">\n          <input id=\"commune\" class=\"swal2-input\" placeholder=\"Commune\" list=\"communes\">\n          <div class=\"mt-3\">\n            <h5 class=\"txt-primary\">Choix du type</h5>\n            <label>\n              <input type=\"radio\" name=\"type\" value=\"jardins\" checked required>\n              <img src=\"${jardinBadge}\" alt=\"Jardin\" style=\"width: 50px;\">\n            </label>\n            <label>\n              <input type=\"radio\" name=\"type\" value=\"SitesEtMonuments\">\n              <img src=\"${monumentBadge}\" alt=\"Monument\" style=\"width: 50px;\">\n            </label>\n          </div>\n        `,\n        focusConfirm: false,\n        preConfirm: () => {\n          console.log(\"Validation du formulaire Swal\");\n          const nom = document.getElementById('nom').value;\n          const commune_input = document.getElementById('commune').value;\n          const type = document.querySelector('input[name=\"type\"]:checked').value;\n\n          if (!nom || !commune_input) {\n            console.log(\"Échec de la validation : champs manquants\");\n            Swal.showValidationMessage(\"Veuillez remplir tous les champs.\");\n            return false;\n          }\n          console.log(`Formulaire validé avec : nom=${nom}, commune=${commune_input}, type=${type}`);\n          const match = commune_input.match(/(.*) \\((\\d+)\\)/);\n          const commune = match ? match[1] : commune_input;\n          const code_postal_autocomplete = match ? match[2] : '';\n\n          return { nom, type, code_postal: code_postal_autocomplete, commune };\n        },\n        didOpen: () => {\n          console.log(\"Ouverture du Swal pour ajout de marqueur\");\n          const datalist = document.createElement('datalist');\n          datalist.id = 'communes';\n          options.forEach(option => {\n            const optionElement = document.createElement('option');\n            optionElement.value = option;\n            datalist.appendChild(optionElement);\n          });\n          document.getElementById('commune').appendChild(datalist);\n        }\n      }).then((result) => {\n        if (result.isConfirmed) {\n          console.log(\"Marqueur confirmé pour ajout\");\n          const Nouveau_Marqueur = {\n            coordinates: [latitude, longitude],\n            name: result.value.nom,\n            type: result.value.type, \n            code_postal: result.value.code_postal || '',\n            commune: result.value.commune || '',\n            adresse_complete: '',\n          };\n          console.log(`Nouveau marqueur : ${JSON.stringify(Nouveau_Marqueur)}`);\n          this.Marqueur_Select = Nouveau_Marqueur; \n          this.Enregistrer_Marqueur();\n          this.Import_donnes();\n          location.reload();\n        }\n        else{\n          console.log(\"Ajout de marqueur annulé ou non confirmé\");\n        }\n      });\n    })\n    .catch(error => {\n      console.error('Erreur lors de la récupération des communes:', error);\n    });\n    console.log(\"Fin de la fonction Ajouter_Marqueur\");\n    },\n    Enregistrer_Marqueur() {\n      if (!this.Marqueur_Select.type) {\n        console.error(\"Le type de marqueur est indéfini\");\n        return;\n      }\n      console.log(\"Type de marqueur :\", this.Marqueur_Select.type);\n      axios\n        .post(`http://localhost:3000/marqueurs`, {\n          type: this.Marqueur_Select.type,\n          nom: this.Marqueur_Select.name,\n          latitude: this.Marqueur_Select.coordinates[0],\n          longitude: this.Marqueur_Select.coordinates[1],\n          code_postal: this.Marqueur_Select.code_postal,\n          commune: this.Marqueur_Select.commune,\n          adresse_complete: this.Marqueur_Select.adresse_complete,\n        })\n        .then(() => {\n          console.log('Ajout Marqueur OK');          \n        })\n        .catch(error => {\n          console.error(\"Ajout Marqueur KO:\", error);\n        });\n    },\n    centerOnMarker(lat, lng, index) {\n      this.center = [lat, lng];\n      this.zoom = 20;\n      this.selectedMarkerIndex = index; // Mise à jour de l'index du marqueur sélectionné\n      if (this.$refs.map && this.$refs.map.mapObject) {\n        const map = this.$refs.map.mapObject;\n        map.eachLayer((layer) => {\n          if (layer instanceof L.Marker && layer.options.index === index) {\n            map.setView([lat, lng], this.zoom);\n            layer.openPopup();\n          }\n        });\n      }\n    },\n    reloadWithSplash() {\n      this.showSplash = true;\n      setTimeout(() => {\n        window.location.reload(); \n      }, 100);\n    },\n    // Fonction pour revenir au Zoom de base\n    resetMap() {\n      this.zoom = 10.4; \n      this.center = [16.265, -61.550];\n    },\n    getIcon(type) {\n      console.log(`Recherche de l'icône pour le type: ${type}`); \n      if (type === 'jardins') {\n        console.log('Retour de l\\'icône pour les jardins'); \n        return jardinIcon;\n      } else if (type === 'SitesEtMonuments') {\n        console.log('Retour de l\\'icône pour les Sites et Monuments');\n        return monumentIcon;\n      } else {\n        console.log('Type non reconnu, retour d\\'une icône par défaut'); \n        return L.icon({\n          iconUrl: '../assets/img/default.png', \n          iconSize: [largeurIcone, hauteurIcone],\n        });\n      }\n    },\n    getBadgeUrl(type) {\n    if (type === 'jardins') {\n      return require('../assets/img/jardin-badge.png');\n    } else if (type === 'SitesEtMonuments') {\n      return require('../assets/img/monument-badge.png');\n    } else {\n      return require('../assets/img/default-badge.png');\n    }\n    },\n    async fetchMarqueurs() {\n      try {\n        const response = await axios.get('http://localhost:3000/marqueurs');\n        this.marqueurs = response.data;\n        this.calculateStats();\n      } catch (error) {\n        console.error('Erreur lors de la récupération des marqueurs:', error);\n      }\n    },\n    //functions de calcul des stats de la base\n    calculateStats() {\n      this.nombreJardins = this.marqueurs.filter(m => m.type === 'jardins').length;\n      this.nombreMonuments = this.marqueurs.filter(m => m.type === 'SitesEtMonuments').length;\n    },\n  },\n};\n\n</script>\n<style>\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}